{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import express from \"express\";\nimport { initializeIDE } from \"./ide\";\nimport { callbackHandler } from \"./auth\";\nconst dotenv = require(\"dotenv\");\nimport cookieParser from \"cookie-parser\";\nimport jwt from \"jsonwebtoken\";\n\nconst app = express();\ndotenv.config();\n\napp.use(express.json());\napp.use(express.urlencoded({ extended: true }));\napp.use(cookieParser());\n\napp.get(\"/\", (req, res) => {\n  res.send(\"Hello World!\");\n});\n\napp.get(\"/auth/github\", (req, res) => {\n  const clientId = process.env.GITHUB_CLIENT_ID;\n  res.redirect(\n    `https://github.com/login/oauth/authorize?client_id=${clientId}&scope=user`\n  );\n});\napp.get(\"/auth/callback\", (req, res) => callbackHandler(req, res));\n\napp.get(\"/pod/create/\", async (req, res) => {\n  let token = req.cookies.minikube_token;\n  token = jwt.verify(token, process.env.JWT_SECRET as string);\n  console.log(token)\n\n  await initializeIDE(token.id);\n  res.status(200).send(\"IDE initialized\");\n});\n\napp.listen(8000, () => {\n  console.log(\"listening at port 8000\");\n});\n"],"names":["dotenv","require","app","express","config","use","json","urlencoded","extended","cookieParser","get","req","res","send","clientId","process","env","GITHUB_CLIENT_ID","redirect","callbackHandler","token","cookies","minikube_token","jwt","verify","JWT_SECRET","console","log","initializeIDE","id","status","listen"],"mappings":"AAAA;;;;gDAAoB;qBACU;sBACE;qDAEP;qDACT;;;;;;AAFhB,MAAMA,SAASC,QAAQ;AAIvB,MAAMC,MAAMC,IAAAA,gBAAO;AACnBH,OAAOI,MAAM;AAEbF,IAAIG,GAAG,CAACF,gBAAO,CAACG,IAAI;AACpBJ,IAAIG,GAAG,CAACF,gBAAO,CAACI,UAAU,CAAC;IAAEC,UAAU,IAAI;AAAC;AAC5CN,IAAIG,GAAG,CAACI,IAAAA,qBAAY;AAEpBP,IAAIQ,GAAG,CAAC,KAAK,CAACC,KAAKC,MAAQ;IACzBA,IAAIC,IAAI,CAAC;AACX;AAEAX,IAAIQ,GAAG,CAAC,gBAAgB,CAACC,KAAKC,MAAQ;IACpC,MAAME,WAAWC,QAAQC,GAAG,CAACC,gBAAgB;IAC7CL,IAAIM,QAAQ,CACV,CAAC,mDAAmD,EAAEJ,SAAS,WAAW,CAAC;AAE/E;AACAZ,IAAIQ,GAAG,CAAC,kBAAkB,CAACC,KAAKC,MAAQO,IAAAA,qBAAe,EAACR,KAAKC;AAE7DV,IAAIQ,GAAG,CAAC,gBAAgB,OAAOC,KAAKC,MAAQ;IAC1C,IAAIQ,QAAQT,IAAIU,OAAO,CAACC,cAAc;IACtCF,QAAQG,qBAAG,CAACC,MAAM,CAACJ,OAAOL,QAAQC,GAAG,CAACS,UAAU;IAChDC,QAAQC,GAAG,CAACP;IAEZ,MAAMQ,IAAAA,kBAAa,EAACR,MAAMS,EAAE;IAC5BjB,IAAIkB,MAAM,CAAC,KAAKjB,IAAI,CAAC;AACvB;AAEAX,IAAI6B,MAAM,CAAC,MAAM,IAAM;IACrBL,QAAQC,GAAG,CAAC;AACd"}